<!doctype html>
<html>
  <head>
    <title><%= @title %></title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/uikit@3.3.3/dist/css/uikit.min.css" />
    <script src="https://cdn.jsdelivr.net/npm/uikit@3.3.3/dist/js/uikit.min.js"></script>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.min.css" crossorigin="anonymous" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.min.js" crossorigin="anonymous"></script>

    <style>
      .tm-table-xsmall td { padding: 3px 12px }
    </style>
  </head>
  <body>
    <div class="uk-container uk-container-small uk-margin-bottom">
      <h1 class="uk-heading-divider uk-margin-top uk-text-center">
        <%= @title %>
      </h1>

      <%= yield %>

      <!-- Enable dark mode -->
      <script>
        function toggleDarkMode() {
          if (window.matchMedia("(prefers-color-scheme: dark)").matches) {
            document.body.classList.add('uk-light')
          } else {
            document.body.classList.remove('uk-light')
          }
        }

        toggleDarkMode()

        setInterval(toggleDarkMode, 500)
      </script>

      <% if ENV['GA_TRACKING_ID'] %>
        <script async src="https://www.googletagmanager.com/gtag/js?id=<%= ENV['GA_TRACKING_ID'] %>"></script>
        <script>
          window.dataLayer = window.dataLayer || [];
          function gtag () { dataLayer.push(arguments); }
          gtag('js', new Date());

          gtag('config', '<%= ENV['GA_TRACKING_ID'] %>');
        </script>
      <% end %>
    </div>
  </body>
</html>
